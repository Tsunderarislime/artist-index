{% extends "base.html" %}

{% block title %}
    <h1 class="mt-2">Artist Index</h1>
{% endblock %}

{% block content %}
    <div class="container-fluid">
        {% if current_user.is_anonymous %}
            <p>Welcome to the Artist Index! Below is a list of artists that I follow on various socials.
                Click on a row to display the links to that artist. Click on their name for a more detailed view.
            </p>
        {% else %} 
            <p>Welcome back, {{ current_user.username }}!</p>
        {% endif %}
    </div>
    <div class="container overflow-y-scroll rounded" id="index-container">
        <table class="table table-bordered border-light-subtle" id="the-index">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Searchable Name</th>
                    <th scope="col">Social Media Links</th>
                </tr>
            </thead>
            <tbody>
                {% for artist in artists %}
                    <tr>
                        <th scope="row" class="dt-control outer-hoverlay">
                            {% if artist.twitter_profile_image_url %}
                                <a href="{{ url_for('artist', name=artist.name) }}" 
                                class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover do-not-scroll"
                                data-bs-toggle="tooltip" data-bs-html="true" data-bs-custom-class="tooltip-custom"
                                data-bs-title="<img class='tooltip-img rounded-3' src='{{ artist.twitter_profile_image_url }}'></a>">{{ artist.name }}</a>
                            {% else %}
                                <a href="{{ url_for('artist', name=artist.name) }}" 
                                class="link-dark link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover do-not-scroll"
                                data-bs-toggle="tooltip" data-bs-html="true" data-bs-custom-class="tooltip-custom"
                                data-bs-title="<img class='tooltip-img rounded-3' src='{{ url_for('static', filename='missing_profile_picture.gif') }}'></a>">{{ artist.name }}</a>
                            {% endif %}
                        </th>
                        <td>{{ artist.searchable_name }}</td>
                        <td>{{ json_dumps(artist.social_media_links) }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}